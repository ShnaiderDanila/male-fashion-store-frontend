import{j as e,r as f,i as o,k as u,o as b,p as N,C as y,q as w,s as v,v as k,w as C,B as d,x as P,N as B,P as S}from"./index-NFrXaa-t.js";import{B as F}from"./Breadcrumbs-XBN8UbSD.js";import{f as E}from"./formatCost-B_6Yb-6T.js";import{C as x}from"./CustomButton-K3qDH9e9.js";import{Q as I}from"./QuantityButton-xfhu1LpO.js";import{c as L,p}from"./checkLikedProduct-RGbS3NHn.js";import{P as R}from"./PageWrapper-CZeAlEoX.js";const D=({product:s})=>e.jsxs("div",{className:"flex flex-col gap-3 items-center text-center lg:text-left lg:items-start",children:[e.jsx("h3",{className:"text-2xl font-bold uppercase tracking-m border-b border-gray pb-2",children:"Описание товара"}),e.jsxs("span",{children:["Тип продукта: ",s.type]}),e.jsx("p",{children:s.description}),e.jsxs("span",{children:["Цвет: ",s.color]}),e.jsxs("span",{children:["Код товара: ",s.productCode]})]}),Q=({currentProduct:s})=>{const[t,i]=f.useState(s.availableSize[0]),r=o(a=>a.userReducer.currentUser),l=u(),m=b(),n={...s,size:t,count:1},c=o(a=>N(a.cartReducer,n)),h=L(r==null?void 0:r.wishlist,s),[j]=p.useToggleLikeProductByIdMutation(),g=async()=>{r?await j(s.id).unwrap().then(a=>{a&&l(C(a))}).catch(a=>{a.data?d.error(a.data.message):d.error("Ошибка сервера! Пожалуйста, повторите попытку позже.")}):m("/signin")};return e.jsx("section",{className:"pt-10 lg:pt-16 pb-16",children:e.jsxs(y,{children:[e.jsxs("div",{className:"mb-12 lg:mb-10 flex flex-wrap justify-center gap-5 lg:flex-nowrap lg:justify-between",children:[e.jsx("div",{className:"max-w-[600px] lg:min-h-96",children:e.jsx("img",{className:"w-full object-cover object-center",src:`https://male-fashion.ru/api/${s.image}`,alt:s.name})}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-5 w-full ",children:[e.jsx("h6",{className:"font-bold text-2xl",children:s.brand}),e.jsx("span",{className:"text-primary-light text-xl",children:s.name}),e.jsxs("div",{className:"max-w-96 border-b border-gray pb-5",children:[e.jsx("span",{className:"inline-block mb-5",children:"Доступные размеры"}),e.jsx("ul",{className:"flex flex-wrap gap-3 justify-center",children:s.availableSize.map(a=>e.jsx("li",{onClick:()=>i(a),className:`${t===a?"text-white bg-primary":"bg-gray hover:bg-primary-light"} 
                    transition-all duration-200 cursor-pointer py-1 px-4`,children:a},a))})]}),e.jsx("p",{className:"font-bold text-2xl",children:s.price&&E(s.price)}),e.jsxs("div",{className:"w-full max-w-96 flex flex-col gap-5",children:[e.jsx(x,{backgroundColor:"#e5e5e5",color:"#111111",onClick:g,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Убрать из избранного"}),e.jsx(w,{})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Добавить в избранное"}),e.jsx(v,{})]})}),c?e.jsx(I,{product:c}):e.jsxs(x,{onClick:()=>l(k(n)),height:"64px",flexDirection:"column",gap:"0",children:[e.jsx("span",{children:"Добавить в корзину"}),e.jsx("span",{children:t})]})]})]})]}),e.jsx(D,{product:s})]})})},T=()=>{const s=P(),{data:t,isLoading:i,isError:r}=p.useGetProductsByIdQuery(s.id);return r?e.jsx(B,{to:"/404",replace:!0}):e.jsxs(e.Fragment,{children:[e.jsx(S,{isLoading:i}),t&&e.jsxs(R,{children:[e.jsx(F,{currentEndpointName:t.name}),e.jsx(Q,{currentProduct:t})]})]})};export{T as default};
