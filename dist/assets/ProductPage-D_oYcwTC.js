import{j as e,r as f,i as c,k as b,o as N,p as y,q as w,C as v,s as C,v as k,w as P,B as o,x as B,N as S,P as F}from"./index-C0iluDBm.js";import{B as I}from"./Breadcrumbs-DnwoccfM.js";import{f as E}from"./formatCost-B_6Yb-6T.js";import{C as d}from"./CustomButton-GKtuyOz9.js";import{Q as L}from"./QuantityButton-DpOkJxXf.js";import{c as Q,p as x}from"./checkLikedProduct-CEAO7JOR.js";import{P as R}from"./PageWrapper-D1_BI0Ro.js";const A=({product:s})=>e.jsxs("div",{className:"flex flex-col gap-3 items-center text-center lg:text-left lg:items-start",children:[e.jsx("h3",{className:"text-2xl font-bold uppercase tracking-m border-b border-gray pb-2",children:"Описание товара"}),e.jsxs("span",{children:["Тип продукта: ",s.type]}),e.jsx("p",{children:s.description}),e.jsxs("span",{children:["Цвет: ",s.color]}),e.jsxs("span",{children:["Код товара: ",s.productCode]})]}),D=({currentProduct:s})=>{const[t,r]=f.useState(s.availableSize[0]),i=c(a=>a.userReducer.currentUser),p=b(),m=N(),l={...s,size:t,count:1},n=c(a=>y(a.cartReducer,l)),{data:h}=w.useGetCurrentUserWishlistQuery(),j=Q(h,s),[g]=x.useToggleLikeProductByIdMutation(),u=async()=>{i?await g(s.id).unwrap().catch(a=>{a.data?o.error(a.data.message):o.error("Ошибка сервера! Пожалуйста, повторите попытку позже.")}):m("/signin")};return e.jsx("section",{className:"pt-10 lg:pt-16 pb-16",children:e.jsxs(v,{children:[e.jsxs("div",{className:"mb-12 lg:mb-10 flex flex-wrap justify-center gap-5 lg:flex-nowrap lg:justify-between",children:[e.jsx("div",{className:"max-w-[600px] lg:min-h-96",children:e.jsx("img",{className:"w-full object-cover object-center",src:`http://localhost:7000/${s.image}`,alt:s.name})}),e.jsxs("div",{className:"flex flex-col items-center text-center gap-5 w-full ",children:[e.jsx("h6",{className:"font-bold text-2xl",children:s.brand}),e.jsx("span",{className:"text-primary-light text-xl",children:s.name}),e.jsxs("div",{className:"max-w-96 border-b border-gray pb-5",children:[e.jsx("span",{className:"inline-block mb-5",children:"Доступные размеры"}),e.jsx("ul",{className:"flex flex-wrap gap-3 justify-center",children:s.availableSize.map(a=>e.jsx("li",{onClick:()=>r(a),className:`${t===a?"text-white bg-primary":"bg-gray hover:bg-primary-light"} 
                    transition-all duration-200 cursor-pointer py-1 px-4`,children:a},a))})]}),e.jsx("p",{className:"font-bold text-2xl",children:s.price&&E(s.price)}),e.jsxs("div",{className:"w-full max-w-96 flex flex-col gap-5",children:[e.jsx(d,{backgroundColor:"#e5e5e5",color:"#111111",onClick:u,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Убрать из избранного"}),e.jsx(C,{})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Добавить в избранное"}),e.jsx(k,{})]})}),n?e.jsx(L,{product:n}):e.jsxs(d,{onClick:()=>p(P(l)),height:"64px",flexDirection:"column",gap:"0",children:[e.jsx("span",{children:"Добавить в корзину"}),e.jsx("span",{children:t})]})]})]})]}),e.jsx(A,{product:s})]})})},M=()=>{const s=B(),{data:t,isLoading:r,isError:i}=x.useGetProductsByIdQuery(s.id);return i?e.jsx(S,{to:"/404",replace:!0}):e.jsxs(e.Fragment,{children:[e.jsx(F,{isLoading:r}),t&&e.jsxs(R,{children:[e.jsx(I,{currentEndpointName:t.name}),e.jsx(D,{currentProduct:t})]})]})};export{M as default};
